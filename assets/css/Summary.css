/* ================================
       SUMMARY PAGE
       - ตารางสรุปยอดขาย
       - ปุ่ม action (แก้ไข/ลบ)
       - Highlight cash / transfer / total
    ================================= */

    /* ---- Summary Table ---- */
    .summary-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
      border-radius: var(--border-radius-small);
      overflow: hidden;
      box-shadow: var(--shadow-light);
    }
    /* กล่องสรุปแต่ละบล็อก */
    .summary-box {
      text-align: center;        /* จัดเนื้อหากล่องตรงกลาง */
      margin: 15px 0;
    }

    /* ยอดรวมสินค้าที่ขายได้ */
    .summary-count {
      font-size: 1.4rem;
      font-weight: 600;
      text-align: center;        /* จัดเลขตรงกลาง */
      margin: 10px 0 15px;
    }
    /* ================================
       HIGHLIGHT (บันทึก + ตารางสินค้า)
    ================================= */

    /* แลกฟรี = น้ำเงิน */
    .report-free,
    .free-label {
      color: #1976d2 !important;
      font-weight: 600;
    }

    /* แม้อยู่ในแถวโอน ก็ยังคงเป็นน้ำเงิน */
    .transfer-row .free-label {
      color: #1976d2 !important;
      font-weight: 600;
    }

    /* โอน = แดงทั้งแถวในบันทึก */
    .transfer-row td {
      color: #d32f2f !important;
      font-weight: 600;
    }
    .summary-table th {
      background: linear-gradient(135deg, var(--primary-light), var(--primary-color));
      color: #fff;
      padding: 10px;
      text-align: center;
      font-weight: 600;
    }
    .summary-table td {
      border: 1px solid #eee;
      padding: 8px;
      text-align: center;
      font-size: 0.95rem;
    }
    .summary-table tr:hover {
      background: #f9f9f9;
    }
    .cash-value {
      color: var(--primary-dark);   /* เงินสด = เขียวเข้ม */
      font-weight: 600;
    }
    .transfer-value {
      color: #d32f2f;               /* โอนเงิน = แดง */
      font-weight: 600;
    }
    .total-value {
      color: var(--primary-color);  /* รวมทั้งหมด = เขียวสด */
      font-weight: 700;
      font-size: 1.05rem;
    }

    /* ---- Action Buttons ---- */
    .summary-table .edit-btn {
      background: #ffd54f;   /* เหลือง */
      color: #333;
      padding: 4px 8px;
      border: none;
      border-radius: var(--border-radius-small);
      cursor: pointer;
      font-size: 0.85rem;
    }
    .summary-table .edit-btn:hover {
      background: #ffca28;
    }

    .summary-table .delete-btn {
      background: #e57373;   /* แดง */
      color: #fff;
      padding: 4px 8px;
      border: none;
      border-radius: var(--border-radius-small);
      cursor: pointer;
      font-size: 0.85rem;
    }
    .summary-table .delete-btn:hover {
      background: #ef5350;
    }
    /* ================================
       SUMMARY COUNT COLORS
       - ซ้าย = เขียว
       - ขวา = แดง
    ================================= */

    .summary-count .sold {
      color: var(--primary-dark);   /* เขียวเข้ม */
      font-weight: 700;
    }

    .summary-count .transfer {
      color: #d32f2f;               /* แดง */
      font-weight: 700;
    }
    /* ================================
       SUMMARY COUNT FIX
       - ซ้าย = เขียว
       - ขวา = แดง (มีแล้วที่ other-unit-value)
    ================================= */

    #total-quantity-left {
      color: var(--primary-dark);   /* เขียวเข้ม */
      font-weight: 700;
    }

    #total-quantity-right.other-unit-value {
      color: #d32f2f;               /* แดง */
      font-weight: 700;
    }

    /* ---- Responsive: ตารางเล็กบนมือถือ ---- */
    @media (max-width: 768px) {
      .summary-table th,
      .summary-table td {
        font-size: 0.8rem;
        padding: 6px;
      }
    
    /* ================================
       CUSTOM MODIFICATIONS
       - Grey separators for sale items and groups on report page
    ================================= */
/* Single-item sales (legacy) separator: draw a grey horizontal line above and below each item */
.sale-separator td {
  /* Grey horizontal lines to open and close single-item sale bills */
  border-top: 2px solid #dddddd !important;
  border-bottom: 2px solid #dddddd !important;
  border-left: none !important;
  border-right: none !important;
}

/* Aggregated sale group: remove all default cell borders (both horizontal and vertical) */
.sale-group td {
  border: none !important;
}

/* Add vertical lines for aggregated sale groups: one before the items cell, one between the quantity and total columns, and one between total and action columns.  Assuming the summary table has the order: 1) date/time, 2) items, 3) quantity, 4) total, 5) actions.  We draw borders on the left of the 2nd, 3rd and 4th cells to create three vertical lines across the group. */
.sale-group td:nth-child(2),
.sale-group td:nth-child(3),
.sale-group td:nth-child(4) {
  border-left: 2px solid #dddddd !important;
}
    /* Bottom border of the last row in an aggregated group */
    .sale-group-end td {
      /* Bottom border for the end of aggregated groups */
      border-bottom: 2px solid #dddddd !important;
    }
    /* Top border of the first row in an aggregated group */
    .sale-group-start td {
      /* Top border for the start of aggregated groups */
      border-top: 2px solid #dddddd !important;
    }
    
    /* === FIX จุดเดียวจบ: บิลเดี่ยวที่ถูกเรนเดอร์เป็นกลุ่ม (มีทั้ง start และ end ในแถวเดียว) === */
tr.sale-group.sale-group-start.sale-group-end td {
  /* ตัดเส้นแนวตั้งทุกด้านทิ้ง แล้วคงไว้แค่เส้นเปิด/ปิดบิล */
  border: none !important;
  border-top: 2px solid #dddddd !important;
  border-bottom: 2px solid #dddddd !important;
}

/* กันกฎแนวตั้งของกลุ่มมาทับอีกรอบ */
tr.sale-group.sale-group-start.sale-group-end td:nth-child(2),
tr.sale-group.sale-group-start.sale-group-end td:nth-child(3),
tr.sale-group.sale-group-start.sale-group-end td:nth-child(4) {
  border-left: none !important;
}
/* ================================
   CUSTOMER SEARCH BAR (Summary Page)
   - ช่องกรอกชื่อลูกค้า + ปุ่มค้นหา
   - อัปเดตแบบ partial (ไม่รีเฟรชหน้า)
================================ */

/* ให้กล่องค้นหาอ้างอิงตำแหน่งจากหน้า Summary */
.summary-page {
  position: relative;
}

/* คอนเทนเนอร์กล่องค้นหา (มุมขวาบน) */
.customer-search {
  position: absolute;
  top: 10px;
  right: 10px;

  display: flex;
  align-items: center;
  gap: 8px;

  z-index: 2; /* ให้อยู่เหนือหัวตาราง/กล่องอื่น ๆ */
}

/* ช่องกรอกชื่อ */
.customer-search input[type="text"],
#customerNameInput {
  padding: 6px 10px;
  border: 1px solid #d9d9d9;
  border-radius: 6px;
  font-size: 0.95rem;
  outline: none;
}

/* ปุ่มค้นหา */
.customer-search button,
#searchButton {
  background-color: var(--primary-color);
  color: #fff;
  border: none;
  padding: 6px 12px;
  border-radius: 6px;
  cursor: pointer;
  font-size: 0.95rem;
  font-weight: 600;
  transition: filter 0.15s ease;
}

.customer-search button:hover,
#searchButton:hover {
  filter: brightness(0.95);
}

/* รองรับจอเล็ก: ย้ายกล่องค้นหาลงมาจัดแถว */
@media (max-width: 768px) {
  .customer-search {
    position: static;      /* เลิก absolute บนจอเล็ก */
    margin: 8px 0 0 0;
    justify-content: flex-end;
  }
  .customer-search input[type="text"],
  #customerNameInput {
    width: 55vw;
    max-width: 320px;
  }
}
